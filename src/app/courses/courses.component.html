<mat-card>
  <mat-card-title>
    Courses
  </mat-card-title>
  <mat-card-subtitle>
    Note: Some courses don't have grade or enrollment information
  </mat-card-subtitle>
  <mat-card-content>
    <mat-button-toggle-group name="fontStyle" aria-label="Font Style">
      <mat-button-toggle value="all" (click)="changeSpecialization('all')">All</mat-button-toggle>
      <mat-button-toggle value="cpr" (click)="changeSpecialization('cpr')">Computational Perception and Robotics</mat-button-toggle>
      <mat-button-toggle value="cs" (click)="changeSpecialization('cs')">Computing Systems</mat-button-toggle>
      <mat-button-toggle value="ii" (click)="changeSpecialization('ii')">Interactive Intelligence</mat-button-toggle>
      <mat-button-toggle value="ml" (click)="changeSpecialization('ml')">Machine Learning</mat-button-toggle>
    </mat-button-toggle-group>
  </mat-card-content>
  <mat-card-actions>
    <button mat-raised-button [color]="percent ? '' : 'accent'" (click)="percent = !percent">Counts</button>
    <button mat-raised-button [color]="percent ? 'accent' : ''" (click)="percent = !percent">Percentage</button>
    <span *ngIf="percent">&nbsp;&nbsp;Percentages are based off of A-F grade counts.</span>
  </mat-card-actions>
</mat-card>
<div class="card-body">
  <table class="table table-sm table-striped">
    <thead>
      <tr>
        <th class="clickable" scope="col" (click)="sort('id')">Course&nbsp;
          <i *ngIf="sortObj.type === 'id' && sortObj.dir === 1" class="fa fa-angle-up"></i>
          <i *ngIf="sortObj.type === 'id' && sortObj.dir === -1" class="fa fa-angle-down"></i>
        </th>
        <th class="clickable" scope="col" (click)="sort('grades.totals.t')">Enrolled&nbsp;
          <i *ngIf="sortObj.type === 'grades.totals.t' && sortObj.dir === 1" class="fa fa-angle-up"></i>
          <i *ngIf="sortObj.type === 'grades.totals.t' && sortObj.dir === -1" class="fa fa-angle-down"></i>
        </th>
        <th class="clickable" scope="col" (click)="sort('numReviews')">Reviews&nbsp;
          <i *ngIf="sortObj.type === 'numReviews' && sortObj.dir === 1" class="fa fa-angle-up"></i>
          <i *ngIf="sortObj.type === 'numReviews' && sortObj.dir === -1" class="fa fa-angle-down"></i>
        </th>
        <th class="clickable" scope="col" (click)="sort('average.workload')">Avg. Work&nbsp;
          <i *ngIf="sortObj.type === 'average.workload' && sortObj.dir === 1" class="fa fa-angle-up"></i>
          <i *ngIf="sortObj.type === 'average.workload' && sortObj.dir === -1" class="fa fa-angle-down"></i>
        </th>
        <th class="clickable" scope="col" (click)="sort('average.difficulty')">Avg. Dif.&nbsp;
          <i *ngIf="sortObj.type === 'average.difficulty' && sortObj.dir === 1" class="fa fa-angle-up"></i>
          <i *ngIf="sortObj.type === 'average.difficulty' && sortObj.dir === -1" class="fa fa-angle-down"></i>
        </th>
        <th class="clickable" scope="col" (click)="sort('average.rating')">Avg. Rating&nbsp;
          <i *ngIf="sortObj.type === 'average.rating' && sortObj.dir === 1" class="fa fa-angle-up"></i>
          <i *ngIf="sortObj.type === 'average.rating' && sortObj.dir === -1" class="fa fa-angle-down"></i>
        </th>
        <th class="clickable" scope="col" *ngIf="percent" (click)="sort('grades.percents.ab')">% &ge; B&nbsp;
          <i *ngIf="sortObj.type === 'grades.percents.ab' && sortObj.dir === 1" class="fa fa-angle-up"></i>
          <i *ngIf="sortObj.type === 'grades.percents.ab' && sortObj.dir === -1" class="fa fa-angle-down"></i>
        </th>
        <th class="clickable" scope="col" *ngIf="percent" (click)="sort('grades.percents.cdf')">% &le; C&nbsp;
          <i *ngIf="sortObj.type === 'grades.percents.cdf' && sortObj.dir === 1" class="fa fa-angle-up"></i>
          <i *ngIf="sortObj.type === 'grades.percents.cdf' && sortObj.dir === -1" class="fa fa-angle-down"></i>
        </th>
        <th class="clickable" scope="col" *ngIf="!percent" (click)="sort('grades.totals.ab')">&ge; B&nbsp;
          <i *ngIf="sortObj.type === 'grades.totals.ab' && sortObj.dir === 1" class="fa fa-angle-up"></i>
          <i *ngIf="sortObj.type === 'grades.totals.ab' && sortObj.dir === -1" class="fa fa-angle-down"></i>
        </th>
        <th class="clickable" scope="col" *ngIf="!percent" (click)="sort('grades.totals.cdf')">&le; C&nbsp;
          <i *ngIf="sortObj.type === 'grades.totals.cdf' && sortObj.dir === 1" class="fa fa-angle-up"></i>
          <i *ngIf="sortObj.type === 'grades.totals.cdf' && sortObj.dir === -1" class="fa fa-angle-down"></i>
        </th>
        <th class="clickable" scope="col" (click)="sort('grades.totals.w')">Withdrew&nbsp;
          <i *ngIf="sortObj.type === 'grades.totals.w' && sortObj.dir === 1" class="fa fa-angle-up"></i>
          <i *ngIf="sortObj.type === 'grades.totals.w' && sortObj.dir === -1" class="fa fa-angle-down"></i>
        </th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let course of courses">
        <td>
          <a [routerLink]="['/courses', course.id]">{{course.combined}}</a>
        </td>
        <td>{{course.grades?.totals.t | number}}</td>
        <td>{{course.numReviews | number}}</td>
        <td>{{course.average?.workload | number}}</td>
        <td>{{course.average?.difficulty | number}}</td>
        <td>{{course.average?.rating | number}}</td>
        <td *ngIf="percent">{{100 * course.grades?.percents.ab | number}}</td>
        <td *ngIf="percent">{{100 * course.grades?.percents.cdf | number}}</td>
        <td *ngIf="!percent">{{course.grades?.totals.ab | number}}</td>
        <td *ngIf="!percent">{{course.grades?.totals.cdf | number}}</td>
        <td>{{course.grades?.totals.w | number}}</td>
      </tr>
    </tbody>
  </table>
</div>
