<clr-main-container>
  <div class="content-container">
    <div class="content-area">
      <clr-datagrid>
        <clr-dg-column [clrDgField]="'department'">Department</clr-dg-column>
        <clr-dg-column [clrDgField]="'id'">Number</clr-dg-column>
        <clr-dg-column [clrDgField]="'name'">Name</clr-dg-column>
        <clr-dg-column [clrDgField]="'totals.t'">Enrolled</clr-dg-column>
        <clr-dg-column [clrDgField]="'totals.w'">Withdrew</clr-dg-column>
        <clr-dg-column [clrDgField]="'totals.a'">% A</clr-dg-column>
        <clr-dg-column [clrDgField]="'totals.b'">% B</clr-dg-column>
        <clr-dg-column [clrDgField]="'totals.c'">% C</clr-dg-column>
        <clr-dg-column [clrDgField]="'totals.d'">% D</clr-dg-column>

        <clr-dg-row *clrDgItems="let course of courses$ | async">
          <clr-dg-cell>{{course.department}}</clr-dg-cell>
          <clr-dg-cell>{{course.id}}</clr-dg-cell>
          <clr-dg-cell>{{course.name}}</clr-dg-cell>
          <clr-dg-cell>{{grades[course.id]?.totals.t | number}}</clr-dg-cell>
          <clr-dg-cell>{{grades[course.id]?.totals.w | number}}</clr-dg-cell>
          <clr-dg-cell>{{100 * grades[course.id]?.totals.a / grades[course.id]?.totals.t | number}}</clr-dg-cell>
          <clr-dg-cell>{{100 * grades[course.id]?.totals.b / grades[course.id]?.totals.t | number}}</clr-dg-cell>
          <clr-dg-cell>{{100 * grades[course.id]?.totals.c / grades[course.id]?.totals.t | number}}</clr-dg-cell>
          <clr-dg-cell>{{100 * grades[course.id]?.totals.d / grades[course.id]?.totals.t | number}}</clr-dg-cell>
          <clr-dg-row-detail *clrIfExpanded>
            <div class="container">
              <clr-datagrid>
                  <clr-dg-column [clrDgField]="'semester'">Semester</clr-dg-column>
                  <clr-dg-column [clrDgField]="'t'">Enrolled</clr-dg-column>
                  <clr-dg-column [clrDgField]="'w'">Withdrew</clr-dg-column>
                  <clr-dg-column [clrDgField]="'a'">% A</clr-dg-column>
                  <clr-dg-column [clrDgField]="'b'">% B</clr-dg-column>
                  <clr-dg-column [clrDgField]="'c'">% C</clr-dg-column>
                  <clr-dg-column [clrDgField]="'d'">% D</clr-dg-column>
                  <clr-dg-row *clrDgItems="let grade of grades[course.id]?.semesterGrades">
                      <clr-dg-cell>{{grade.semester | semester}}</clr-dg-cell>
                      <clr-dg-cell>{{grade.t | number}}</clr-dg-cell>
                      <clr-dg-cell>{{grade.w | number}}</clr-dg-cell>
                      <clr-dg-cell>{{100 * grade.a / grade.t | number}}</clr-dg-cell>
                      <clr-dg-cell>{{100 * grade.b / grade.t | number}}</clr-dg-cell>
                      <clr-dg-cell>{{100 * grade.c / grade.t | number}}</clr-dg-cell>
                      <clr-dg-cell>{{100 * grade.d / grade.t | number}}</clr-dg-cell>
                    </clr-dg-row>
                  </clr-datagrid>
                </div>
          </clr-dg-row-detail>
        </clr-dg-row>

        <clr-dg-footer>{{(courses$ | async)?.length}} courses</clr-dg-footer>
      </clr-datagrid>
    </div>
  </div>
</clr-main-container>
